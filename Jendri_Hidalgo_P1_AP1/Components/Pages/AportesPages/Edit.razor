@page "/Aportes/Edit/{AporteId:int"
@using Jendri_Hidalgo_P1_AP1.Models
@using Jendri_Hidalgo_P1_AP1.Services
@inject AportesService aportesService;
@inject NavigationManager navigation;


@code {
    [Parameter]
    public int AporteId { get; set; }
    public Aportes aporteModificado { get; set; } = new Aportes();
    public bool PersonaRepetido { get; set; }
    public List<Aportes> List { get; set; } = new List<Aportes>();


    protected override async Task OnInitializedAsync()
    {
        if (AporteId > 0)
        {
            aporteModificado = await aportesService.Buscar(AporteId);
        }


    }


    public async Task<bool> Validar()
    {
        var existeTecnico = await aportesService.BuscarPersona(aporteModificado.Personas);

        PersonaRepetido = existeTecnico != null;
        return PersonaRepetido;
    }



    public async Task ModificarAporte()
    {
        if (!await Validar())
        {
            await aportesService.Guardar(aporteModificado);

            navigation.NavigateTo("/Aportes/Index");
        }

    }
}
